<section>

  <h2>Compra de productos</h2>

  <form (ngSubmit)="submit($event)" [formGroup]="formBuysProduct">

    <div class="content__input">
      <label for="productId">Seleccione  el producto</label>
      <select id="productId" formControlName="product_id">
        <option value="" selected="true">Seleccione</option>
        <option *ngFor="let product of products" value="{{product.id}}">
          {{product.description}}
        </option>
      </select>
    </div>

    <div class="content__input">
      <label for="buysDate">Fecha de compra</label>
      <input type="date" id="buysDate" formControlName="buys_date">
    </div>

    <div class="content__input">
      <label for="buysBill">Factura de compra</label>
      <input type="text" id="buysBill" formControlName="buys_bill">
    </div>

    <div class="content__input">
      <label for="buysStock">Cantidad de compra</label>
      <input type="number" id="buysStock" formControlName="buys_stock">
    </div>

    <div class="content__input">
      <label for="buysUnitValue">Valor compra (c/u)</label>
      <input type="number" id="buysUnitValue" formControlName="buys_unit_value">
    </div>


    <div class="content__input">
      <label for="totalBuysValue">Valor compra total</label>
      <input type="number" id="totalBuysValue" formControlName="total_buys_value">
    </div>
    <button>Ingresar</button>
    <button (click)="updateBuyProducts()">Modificar</button>
  </form>

  <table mat-table [dataSource]="buysProducts" class="mat-elevation-z8">

    <ng-container matColumnDef="productId">
      <th mat-header-cell *matHeaderCellDef>Producto</th>
      <td mat-cell *matCellDef="let item">{{item.product_id.description}}</td>
    </ng-container>

    <ng-container matColumnDef="buysDate">
      <th mat-header-cell *matHeaderCellDef>Fecha de compra</th>
      <td mat-cell *matCellDef="let item">{{item.buys_date}}</td>
    </ng-container>

    <ng-container matColumnDef="buysBill">
      <th mat-header-cell *matHeaderCellDef>Factura de compra</th>
      <td mat-cell *matCellDef="let item">{{item.buys_bill}}</td>
    </ng-container>

    <ng-container matColumnDef="buysStock">
      <th mat-header-cell *matHeaderCellDef>Cantidad</th>
      <td mat-cell *matCellDef="let item">{{item.buys_stock | number}}</td>
    </ng-container>

        <ng-container matColumnDef="totalsStock">
          <th mat-header-cell *matHeaderCellDef>Inventario total</th>
          <td mat-cell *matCellDef="let item">{{item.product_id.totals_stock | number}}</td>
        </ng-container>

    <ng-container matColumnDef="buysUnitValue">
      <th mat-header-cell *matHeaderCellDef>Valor compra (c/u)</th>
      <td mat-cell *matCellDef="let item"> $ {{item.buys_unit_value | number}}</td>
    </ng-container>

    <ng-container matColumnDef="totalBuysValue">
      <th mat-header-cell *matHeaderCellDef>Valor compra total</th>
      <td mat-cell *matCellDef="let item"> $ {{item.total_buys_value | number}}</td>
    </ng-container>

    <ng-container matColumnDef="toggleUpdate">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let item">
        <button (click)="toggleUpdates(item)">Modificar</button>
      </td>
    </ng-container>

    <ng-container matColumnDef="toggleDelete">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let item">
        <button (click)="toggleDelete(item)">Borrar</button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>

</section>
